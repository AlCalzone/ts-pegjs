# TS PEG.js

TS PEG.js is a TS code generation plugin for [PEG.js](https://pegjs.org).

## Requirements

* [PEG.js](https://pegjs.org)

## Installation
------------

### Node.js

Install PEG.js with ts-pegjs plugin

    $ npm install ts-pegjs

Usage
-----

### Generating a Parser from JS code

In Node.js, require both the PEG.js parser generator and the ts-pegjs plugin:

    var pegjs = require("pegjs");
    var tspegjs = require("ts-pegjs");

To generate a TS parser, pass to `pegjs.generate` ts-pegjs plugin and your grammar:

    var parser = pegjs.generate("start = ('a' / 'b')+", {
        plugins: [tspegjs]
    });

The method will return source code of generated parser as a string. 

Supported options of `pegjs.generate`:

  * `cache` — if `true`, makes the parser cache results, avoiding exponential
    parsing time in pathological cases but making the parser slower (default:
    `false`). This is strongly recommended for big grammars
    (like javascript.pegjs or css.pegjs in example folder)
  * `allowedStartRules` — rules the parser will be allowed to start parsing from
    (default: the first rule in the grammar)

### Generating a Parser from CLI

Sample usage:

```
./bin/tspegjs -o exmples/arithmetics.ts examples/arithmetics.pegjs
```

It will generarate the parser in the TS flavour.


Using the Parser
----------------

1) Save parser generated by `pegjs.generate` to a file or use the one generated from the CLI tool.

2) In client TS code:

```
    import { SyntaxError, parse } from './arithmetics';

    try {
        const sampleOutput = parse('my sample...');
    }
    catch (ex: SyntaxError)
    {
        // Handle parsing error
        // [...]
    }
```

Acknoledgements
---------------

Thanks to:

- [David Majda](https://github.com/dmajda) for creating pegjs
- [Futago-za Ryuu](https://github.com/futagoza) for maintain pegjs
- [Elantcev Mikhail](https://github.com/Nordth) for providing the pegjs PHP plugin, inspiration on this one.


License
-------

[The MIT License (MIT)](http://opensource.org/licenses/MIT)


-----
(c) 2017, [Pedro J. Molina](https://github.com/pjmolina) at [metadev.pro](https://metadev.pro)